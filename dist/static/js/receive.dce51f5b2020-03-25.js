(window.webpackJsonp=window.webpackJsonp||[]).push([["receive"],{"+uxw":function(e,t,r){"use strict";r.r(t);var a=r("Nrkc"),o=r("v72X");for(var s in o)"default"!==s&&function(e){r.d(t,e,function(){return o[e]})}(s);r("WAr/");var i=r("ZrdR"),n=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);n.options.__file="index.vue",t.default=n.exports},"1yFg":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"receive"},[["finishDetailsTask","finishDetailsDocument","finishDetailsBill","finishDetailsDynamic"].includes(e.$route.name)?r("div",{staticClass:"dgg-order-nav"},[r("span",{staticClass:"dgg-order-state"},[e._v(e._s(e.transactionItem.orderStatusName))]),e._v(" "),r("el-menu",{staticClass:"dgg-submenu-nav",attrs:{"default-active":e.defaultActive,mode:"horizontal"}},[r("el-menu-item",{key:"1",attrs:{index:"1"},on:{click:function(t){return e.menuJump("finishDetailsTask")}}},[e._v("任务")]),e._v(" "),r("el-menu-item",{key:"2",attrs:{index:"2"},on:{click:function(t){return e.menuJump("finishDetailsDocument")}}},[e._v("文档")]),e._v(" "),r("el-menu-item",{key:"4",attrs:{index:"4"},on:{click:function(t){return e.menuJump("finishDetailsDynamic")}}},[e._v("动态")])],1),e._v(" "),r("div",{staticClass:"dgg-details-member"},[r("div",{staticClass:"memberImgLists"},e._l(e.memberImgLists,function(e){return r("el-image",{key:e,staticStyle:{width:"27px",height:"27px"},attrs:{src:e,fit:"cover"}})}),1),e._v(" "),r("dgg-icon",{staticClass:"more-member",attrs:{"icon-class":"icon_more","svg-width":"26px","svg-height":"26px"},on:{click:e.openMemberSet}})],1)],1):e._e(),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"allOrder"===e.$route.name,expression:"$route.name === 'allOrder'"}],staticClass:"receive-content"},[r("div",{staticClass:"tabs-item-head"},[r("div",[r("dgg-input",{staticClass:"search",attrs:{maxlength:30,oninput:"this.value=this.value.replace(/\\s/g,'')",onkeyup:"if(value.length>30)value=value.slice(0,30)",placeholder:"客户名称/生产单编号"},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}},[r("dgg-icon",{attrs:{slot:"prefix","icon-class":"dgg-search","svg-width":"15px","svg-height":"15px"},slot:"prefix"})],1),e._v(" "),r("dgg-button",{staticClass:"receive-button default-btn-with",attrs:{plain:""},on:{click:e.searchClick}},[e._v("\n          搜 索\n        ")]),e._v(" "),r("dgg-button",{staticClass:"dgg-button-nocolor default-btn-with",attrs:{plain:""},on:{click:e.resetClick}},[e._v("\n          重 置\n        ")]),e._v(" "),r("div",{staticClass:"fr receive-radio"}),e._v(" "),r("el-tooltip",{attrs:{effect:"dark","popper-class":"grab-tooltip",content:e.receiptTime,placement:"top"}},[r("div",{staticClass:"fr icon_info"},[r("dgg-icon",{attrs:{"icon-class":"icon_info","svg-width":"15px","svg-height":"30px"}})],1)])],1)]),e._v(" "),"1"===e.activeData?r("div",{staticClass:"receive-body"},[r("dgg-edit-table",{attrs:{data:e.allOrderData.records,columns:e.columns,"request-data-api":e.zysc_get_allOrder_list,params:e.params,"page-info":e.allOrderData.total}})],1):e._e()]),e._v(" "),r("el-dialog",{attrs:{visible:e.singleBackCodeDialog,title:"拒接订单",width:"400px"},on:{"update:visible":function(t){e.singleBackCodeDialog=t},close:function(t){e.singleBackCodeForm.code="",e.singleBackCodeForm.remark=""}}},[r("el-form",{ref:"form",attrs:{model:e.singleBackCodeForm}},[r("el-form-item",{attrs:{label:"拒接原因："}},[r("el-select",{attrs:{placeholder:"请选择拒接原因"},model:{value:e.singleBackCodeForm.code,callback:function(t){e.$set(e.singleBackCodeForm,"code",t)},expression:"singleBackCodeForm.code"}},e._l(e.singleBackCodeOption,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"refuse-memo",attrs:{label:"拒接备注："}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},"show-word-limit":"",maxlength:"500"},model:{value:e.singleBackCodeForm.remark,callback:function(t){e.$set(e.singleBackCodeForm,"remark",t)},expression:"singleBackCodeForm.remark"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.singleBackCodeDialog=!1,e.singleBackCodeForm.code="",e.singleBackCodeForm.remark=""}}},[e._v("取 消\n      ")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.refusedOrder}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{staticClass:"receiveDialog-alert",attrs:{visible:e.receiveDialog,title:"接收订单",width:"400px"},on:{"update:visible":function(t){e.receiveDialog=t},close:function(t){e.receiveForm.code="",e.receiveForm.name="",e.receiveForm.projectMembersPhone="",e.searchStorePhone="",e.choosePeopleData={}}}},[r("el-form",{attrs:{model:e.receiveForm}},[r("el-form-item",{attrs:{label:"生产单编号："}},[r("p",[e._v("\n          "+e._s(this.receiveItem.scOrderNo?this.receiveItem.scOrderNo:"--")+"\n        ")])]),e._v(" "),r("el-form-item",{attrs:{label:"合同编号："}},[r("p",[e._v("\n          "+e._s(this.receiveItem.contractNo?this.receiveItem.contractNo:"--")+"\n        ")])]),e._v(" "),r("el-form-item",{staticClass:"choose-people",attrs:{label:"项目负责人："}},[Object.keys(e.choosePeopleData).length>0?[r("span",{staticClass:"show-transactor-people"},[r("img",{attrs:{src:e.choosePeopleData.photoUrl?e.choosePeopleData.photoUrl:e.taskTransactorImg,onerror:e.errorTaskTransactorImg,alt:""}}),e._v(" "),r("dgg-icon",{attrs:{"icon-class":"dgg_delete","svg-width":"14px","svg-height":"14px",sdafsadfasdffas:""},on:{click:e.deleteChoosePeople}})],1),e._v(" "),r("span",{staticClass:"show-transactor-name"},[e._v(e._s(e.choosePeopleData.label))])]:e._e(),e._v(" "),Object.keys(e.choosePeopleData).length<1?r("dgg-icon",{staticClass:"addTransactor",attrs:{"icon-class":"dgg_add","svg-width":"18px","svg-height":"18px"},on:{click:function(t){e.showChoosePeopleDialog=!e.showChoosePeopleDialog}}}):e._e(),e._v(" "),e.showChoosePeopleDialog?r("div",{staticClass:"project-people-dialog"},[r("div",{staticClass:"dgg-order-search"},[r("dgg-input",{staticClass:"search-input",attrs:{placeholder:"输入成员姓名或手机号搜索",maxlength:"30"},on:{input:function(t){e.searchStorePhone=e.searchStorePhone.replace(/\s/g,"")},blur:e.receiveOrderDialogFn},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.target.blur(t)}},model:{value:e.searchStorePhone,callback:function(t){e.searchStorePhone=t},expression:"searchStorePhone"}},[r("dgg-icon",{attrs:{slot:"prefix","icon-class":"dgg-search"},slot:"prefix"})],1)],1),e._v(" "),e.receiveOption.length>0?r("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"}},e._l(e.receiveOption,function(t,a){return r("li",{key:a,staticClass:"infinite-list-item",class:{"active-product-list":t.userId==e.chooseStoreId},on:{click:function(r){return e.chooseStoreData(t)}}},[r("span",[e._v(e._s(t.label?t.label:"--"))]),e._v(" "),r("span",[e._v(e._s(t.value?t.phone:"--"))])])}),0):e._e(),e._v(" "),e.receiveOption.length<1?r("p",{staticClass:"no-data"},[e._v("暂无数据！")]):e._e()]):e._e()],2)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.receiveDialog=!1,e.receiveForm.code="",e.receiveForm.name="",e.receiveForm.projectMembersPhone=""}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.receiveButton},on:{click:e.receiveOrder}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.backCodeDialog,title:"退单",width:"400px"},on:{"update:visible":function(t){e.backCodeDialog=t},close:function(t){e.backCodeForm.code="",e.backCodeForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[r("el-form",{ref:"form",attrs:{model:e.backCodeForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"退单类型：",prop:"code"}},[r("el-select",{attrs:{placeholder:"请选择退单类型"},model:{value:e.backCodeForm.code,callback:function(t){e.$set(e.backCodeForm,"code",t)},expression:"backCodeForm.code"}},e._l(e.backCodeOption,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"back-memo",attrs:{label:"退单备注：",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},"show-word-limit":"",maxlength:"500"},model:{value:e.backCodeForm.remark,callback:function(t){e.$set(e.backCodeForm,"remark",t)},expression:"backCodeForm.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"退单附件：",prop:"file"}},[e._e(),e._v(" "),r("span",{staticClass:"file-add",on:{click:function(t){e.fileType="back",e.docModal=!0}}},[e._v("+添加")])],1),e._v(" "),r("el-form-item",[r("ul",e._l(e.DetailDocumentfileLists,function(t,a){return r("li",{key:a},[r("span",{staticClass:"icon-name"},[r("dgg-icon",{attrs:{"icon-class":e.getIconByType(t),"svg-width":"16px","svg-height":"16px"}}),e._v(" "),r("span",{staticClass:"file-name",attrs:{title:t.filename?t.filename:"--"}},[e._v(e._s(t.filename?t.filename:"--"))])],1),e._v(" "),r("span",{staticClass:"dgg-button-group file-handel"},["pdf"==e.getDocumentType(t)||e.imageTypes.includes(e.getDocumentType(t))?r("span",{on:{click:function(r){e.viewDocument(t,e.getDocumentType(t))}}},[e._v("查看\n              ")]):e._e(),e._v(" "),r("span",{on:{click:function(r){return e.downloadDocument(t)}}},[e._v("下载 ")]),e._v(" "),r("span",{on:{click:function(r){return e.invalidDocument(t)}}},[e._v("删除 ")])])])}),0)])],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.backCodeDialog=!1,e.backCodeForm.code="",e.backCodeForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.backOrder}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.caseAuditDialog,title:"结项申请",width:"400px"},on:{"update:visible":function(t){e.caseAuditDialog=t},close:function(t){e.caseAuditForm.code="",e.caseAuditForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[r("el-form",{ref:"form",attrs:{model:e.caseAuditForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"结项类型：",prop:"code"}},[r("el-select",{attrs:{placeholder:"请选择结项类型"},model:{value:e.caseAuditForm.code,callback:function(t){e.$set(e.caseAuditForm,"code",t)},expression:"caseAuditForm.code"}},e._l(e.caseAuditOption,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"back-memo",attrs:{label:"结项说明：",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},"show-word-limit":"",maxlength:"500"},model:{value:e.caseAuditForm.remark,callback:function(t){e.$set(e.caseAuditForm,"remark",t)},expression:"caseAuditForm.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"结项附件：",prop:"file"}},[e._e(),e._v(" "),r("span",{staticClass:"file-add",on:{click:function(t){e.fileType="audit",e.docModal=!0}}},[e._v("+添加")])],1),e._v(" "),r("el-form-item",[r("ul",e._l(e.DetailDocumentfileLists,function(t,a){return r("li",{key:a},[r("span",{staticClass:"icon-name"},[r("dgg-icon",{attrs:{"icon-class":e.getIconByType(t),"svg-width":"16px","svg-height":"16px"}}),e._v(" "),r("span",{staticClass:"file-name",attrs:{title:t.filename?t.filename:"--"}},[e._v(e._s(t.filename?t.filename:"--"))])],1),e._v(" "),r("span",{staticClass:"dgg-button-group file-handel"},["pdf"==e.getDocumentType(t)||e.imageTypes.includes(e.getDocumentType(t))?r("span",{on:{click:function(r){e.viewDocument(t,e.getDocumentType(t))}}},[e._v("查看\n              ")]):e._e(),e._v(" "),r("span",{on:{click:function(r){return e.downloadDocument(t)}}},[e._v("下载 ")]),e._v(" "),r("span",{on:{click:function(r){return e.invalidDocument(t)}}},[e._v("删除 ")])])])}),0)])],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.caseAuditDialog=!1,e.caseAuditForm.code="",e.caseAuditForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.auditOrder}},[e._v("确 定")])],1)],1),e._v(" "),r("dgg-modal",{staticClass:"document-upload-modal",attrs:{modal:e.docModal,hasmodal:!0,"close-on-click-modal":!1,loading:e.fileLoading,"affirm-text":"确定",title:"上传文档",width:"512px"},on:{modalAffirm:e.submitModal,modalQuit:function(t){e.docModal=!1}}},[e.docModal?r("dgg-upload-doc",{ref:"uploadDoc",staticClass:"document-upload-demo",attrs:{limit:50,"auto-upload":!1,data:e.uploadparams,"file-list":e.fileList,"accept-type":e.acceptType,"list-url":e.listUrl,"del-url":e.deleteUrl,action:e.uploadUrl,onError:e.fileLoadError,multiple:""}},[r("dgg-button",{staticClass:"receive-button",staticStyle:{width:"100px"},attrs:{type:"primary"}},[e._v("\n        上传文件\n      ")])],1):e._e()],1),e._v(" "),r("router-view")],1)},o=[];r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o})},"7Hlz":function(e,t,r){},"7mBa":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(r("cLjf")),o=l(r("hDQ3")),s=l(r("unDg")),i=l(r("bS4n")),n=r("8t5x"),c=(l(r("a/LZ")),l(r("A/Ru")));function l(e){return e&&e.__esModule?e:{default:e}}t.default={name:"Receive",components:{},data:function(){var e=this;this.$createElement;return{receiveDialog:!1,receiveButton:!1,taskTransactorImg:c.default,errorTaskTransactorImg:'this.src="'+c.default+'"',showChoosePeopleDialog:!1,chooseStoreId:"",receiptTime:null,choosePeopleData:{},searchStorePhone:"",receiveForm:{code:"",name:"",projectMembersPhone:""},receiveOption:[],receiveItem:"",singleBackCodeForm:{code:""},activeData:"1",radioArray:[{label:"订 单",value:"1"},{label:"产 品",value:"2"}],activeName:"first",searchState:!1,columns:[{prop:"productName",width:"175",label:"业务产品",type:"isrender",render:function(e,t){return e("div",{style:"padding-bottom:5px;"},[e("span",{style:"border-bottom: 1px solid #10bbb8 !important;padding-bottom:3px;padding-right:3px;vertical-align: top;"},[t.row.businessProductName]),e("span",{class:"dgg-text-ellip",style:"display:inline-block; width:90px;vertical-align: top;"},[t.row.productName])])}},{prop:"scOrderNo",label:"生产单编号",width:"140"},{prop:"customerName",width:"160",label:"客户名称",type:"isrender",render:function(e,t){return e("div",{class:"dgg-text-ellip"},[t.row.customerName])}},{prop:"region",width:"100",label:"办理地区"},{prop:"proScAttrName",label:"产品属性"},{prop:"remark",label:"备注",width:"140"},{prop:"receiveDeadlineTimeStamps",label:"剩余时间",type:"isrender",render:function(e,t){return e("div",{style:"color: red;"},[t.row.receiveDeadlineTimeStamps])}},{label:"操作",width:"150",type:"isrender",render:function(t,r){return r.row.isReject?t("div",[t("dgg-button",{attrs:{plain:!0},style:"width:50px",class:"receive-button",on:{click:function(t){e.receiveOrderDialog(r.row)}}},["接 收"]),t("dgg-button",{attrs:{plain:!0},style:"width:50px;margin-left:10px;",class:"dgg-button-nocolor",on:{click:function(t){e.refuseConfirm(r.row)}}},["拒 接"])]):t("div",[t("dgg-button",{attrs:{plain:!0},style:"width:50px",class:"receive-button",on:{click:function(t){e.receiveOrderDialog(r.row)}}},["接 收"])])}}],allSearch:{},searchData:"",paramsData:{},paramsSearchData:{},singleBackCodeDialog:!1,singleBackCodeOption:[],refusedOrderRow:"",interval:null}},computed:(0,i.default)({},(0,n.mapState)(["storeInfoData"]),(0,n.mapState)("orderModule",["areaOptions","productOptions","productDataList"]),(0,n.mapState)("receiveModule",["dataList"]),{params:function(){return(0,i.default)({},this.paramsData)},queryList:function(){return[{field:"businessProductCode",type:"select",label:"业务",width:"220px",value:"",options:[{label:"全部",value:""}].concat((0,s.default)(this.productOptions.map(function(e){return{value:e.code,label:e.name}})))||[]},{field:"productId",type:"select",label:"产品",value:"",width:"220px",options:[{label:"全部",value:""}].concat((0,s.default)(this.productDataList.map(function(e){return{value:e.id,label:e.name}})))||[]},{field:"regionCode",type:"select",label:"地区",width:"220px",value:"",options:this.areaOptions.map(function(e){return{value:e.code,label:e.name}})||[]},{label:"佣金",width:"220px",children:[{field:"commissionLow",type:"input",label:"test1",width:"97px",placeholder:"最低",value:""},{field:"commissionHight",type:"input",label:"test1",width:"97px",placeholder:"最高",value:""}]}]}}),watch:{},mounted:function(){var e=(0,o.default)(a.default.mark(function e(){var t=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.zysc_get_setTimeS(),this.$nextTick(function(){t.timeGoBy()}),this.storeInfoData.storeId&&(this.paramsData.storeId=this.storeInfoData.storeId);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeRouteLeave:function(e,t,r){sessionStorage.processPlanRoute=t.fullPath,clearInterval(this.interval),this.interval=null,r()},created:function(){var e=(0,o.default)(a.default.mark(function e(){var t=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$nextTick(function(){t.timeGoBy()});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeDestroy:function(){},methods:(0,i.default)({},(0,n.mapActions)(["ruoterJump"]),(0,n.mapActions)("receiveModule",["zysc_get_order_model_by_status","get_store_peoples","receive_order","refused_order","refuse_code_tree_book_list","zysc_get_setTime"]),(0,n.mapActions)("orderModule",["zysc_find_product"]),(0,n.mapActions)("teamSettingModule",["get_store_user"]),{resetQuery:function(){this.searchData=""},timeGoBy:function(){var e=this;e.interval=setInterval(function(){var t=(new Date).getTime();e.dataList.records.map(function(r){var a=r.receiveDeadlineTimeStamp,o=Number(a)-t,s=Math.floor(o/36e5%24),i=Math.floor(o/6e4%60),n=Math.floor(o/1e3%60),c=s+":"+i+":"+(n<10?"0"+n:n);for(var l in r)"receiveDeadlineTimeStamp"==l&&e.$set(r,"receiveDeadlineTimeStamps",c)})},1e3)},refuseConfirm:function(e){var t=this;this.$confirm("该订单根据您的行为及数据进行匹配，建议不要轻易拒接订单，拒接订单将会影响您的接单排名分数哟~~","提示",{confirmButtonText:"拒绝",cancelButtonText:"取消"}).then(function(){t.showSingleBackCodeDialog(e)}).catch(function(){})},receiveOrderDialog:function(e){this.receiveItem=e,this.receiveDialog=!0,this.receiveOrderDialogFn()},receiveOrderDialogFn:function(){var e=(0,o.default)(a.default.mark(function e(){var t,r,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.searchStorePhone){e.next=8;break}if(!this.storeInfoData.storeId){e.next=6;break}return e.next=4,this.get_store_peoples({storeId:this.storeInfoData.storeId});case 4:200===(t=e.sent).code?(r=[],t.data.forEach(function(e,t){"EMPLOYEE_STATUS_1"===e.currentStatus&&(e.value=e.userId,e.label=e.userName,r.push(e))}),this.receiveOption=r):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 6:e.next=9;break;case 8:this.receiveOption.length>0&&(this.receiveOption=this.receiveOption.filter(function(e){return e.label==o.searchStorePhone||e.phone==o.searchStorePhone}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),chooseStoreData:function(e){var t=this;this.$nextTick(function(){t.receiveForm.code=e.value,t.receiveForm.name=e.userName,t.receiveForm.projectMembersPhone=e.phone,t.showChoosePeopleDialog=!1,t.choosePeopleData=e})},deleteChoosePeople:function(){var e=this;this.$nextTick(function(){e.choosePeopleData="",e.receiveForm.code="",e.receiveForm.name="",e.receiveForm.projectMembersPhone=""})},receiveOrder:function(){var e=(0,o.default)(a.default.mark(function e(){var t,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.receiveForm.code.length){e.next=3;break}return this.$notify({message:"请选择项目负责人",type:"error",customClass:"dgg-tip-msg"}),e.abrupt("return");case 3:return t=this.receiveItem,this.receiveButton=!0,e.next=7,this.receive_order({projectManagerId:this.receiveForm.code,projectManagerName:this.receiveForm.name,projectMembersPhone:this.receiveForm.projectMembersPhone,id:t.id});case 7:r=e.sent,this.receiveButton=!1,200===r.code?(this.receiveDialog=!1,this.$message.success("接单成功"),this.receiveForm.code="",this.searchClick(),this.$bus.$emit("receiveRefresh")):this.$notify({message:r.message,type:"error",customClass:"dgg-tip-msg"});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showSingleBackCodeDialog:function(){var e=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refuse_code_tree_book_list({code:"QDS_ZYGSSC_REFUSEREASON",type:1,level:1});case 2:200===(r=e.sent).code&&(this.singleBackCodeOption=r.data,this.singleBackCodeDialog=!0,this.refusedOrderRow=t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refusedOrder:function(){var e=(0,o.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.singleBackCodeForm.code.length){e.next=3;break}return this.$message.error("请选择拒接原因"),e.abrupt("return");case 3:return e.next=5,this.refused_order({id:this.refusedOrderRow.id,refuseReason:this.singleBackCodeForm.code,refuseRemark:this.singleBackCodeForm.remark});case 5:200===(t=e.sent).code?(this.$message.success("操作成功"),this.searchClick(),this.singleBackCodeDialog=!1):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),queryEmit:function(){var e=(0,o.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("businessProductCode"!==r){e.next=4;break}return e.next=3,this.zysc_find_product({proType:t});case 3:this.$refs.query.resetFieldValue("productId");case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),search:function(e){this.paramsSearchData=e,this.paramsData=this.paramsSearchData},searchClick:function(){this.paramsData={keyWord:this.searchData}},resetClick:function(){this.searchData="",this.paramsData={}},zysc_get_setTimeS:function(){var e=(0,o.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.zysc_get_setTime({});case 2:200==(t=e.sent).code&&(this.receiptTime="请在"+t.data+"小时内接单，否则订单将退回且影响您的排名");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})}},"A/Ru":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAE/ElEQVRIS62WbWxTVRjH/+fc2/audKwdDDa2CUQQIhGMiyQSZhgMJkjCSyMYQ6K8GnF8ICAzxhAgCGJI+AABFN8TjBIGxqiJhK0fFnlZGJNBYKJC5ua6yUZb99benhdzbnf3UroNoje5bdNzzvN7/s/zv+dcghGuxtbOmRDcD8hCQE4HaGZiibgPkHqAVIFq5fnjPXXDhSJDDTY3hwsExQEpsWCkZNQ4IaigAmUTJnhrUs1/ACSl1JtawocIoZullPRhIPYcQoiQUhzNy/ZuJYSwgWsHgRoawj7qRDmAokcBpJgbECb8Eyd6Q31J2D8SSiLn/geIHTKQl52xyFbWp6gxGDoMkNL/qCRpuTySn+PbYvVQfSQaT6oftScjJaV6RoWcrQxigZpawucf1l0jBU8eV27My/YWk8Rzwq4lT5BSou3vVmSNzx4xdsPdP3CtphpLV64GpSmMSvVZpDEY2Q3IncnRrlZfQlnpOhQvWYayXfuHhAkh4F84B3OLFmLrO7tTg0D2kMZguLLfaRJOhwZdo2BcoL39Pm78Uovnnh/e7XW1V1Dw7GwYLg0aJdbaWJzDNAUIsboTII3BUDNAcnSNYLTHaUFU2bgQ4EKisysOLoavngKMHuWEVBuTtS5xm0wg2qNgCKrSRQmka4zXAKUEPbEYKi5ewrTJkzAxNxdMCHR1cUgVJcWlWjLWm2aNmPE49h47DqfTiddfXo20tDTEogKck5gFchuay+N24F4ohCyfDxu2bUPd3Qa899Z2zC14BlGTI26mBrkNHWrthdpa5Gdno2z7NtwMtmLZihXYsWkj4kzAjFmgUHO625mTZuj44ONPUF9bg8s/fg/NNwaFy/04+PYO3I5E8Mali+CagFLewTkEKNyaA29OmoblE/Lx+dlv8cnxo2ivvwmanoGnSpbgxL694KpfUalKF670uB1FKrNPy8/g1OnTWFzwND777gcsX7XKyuqnv5qw4cLPyB/jhneUAbVbMhDrfmncYyibNgMx08T+Y8dx9puvoXl9WL9mDV71rwSLC5imZYbIbqeD7PSmu9ATjWLfhx+hpa3NcsuuLaXwZWTg3as1+PLO73gyNwOgtA+iQLyboWr+C0h3OFB76xYCl6sxOS8PJYVzoTwU7eEQgu7pe2AdBoHPbViNEL2uU99X7t3DikAFcrwGMtMN8F4lliJJ0GMyTJEOfDVvPjy6nnCclJb73r9eB4fUsWnKjFmWyavu3Dl/4s/LC+ZkPY4luU8gy+VCyDTxxW+3cfDGdYwd7cT4DMMKbJfMBilwKNwJR5Rh7dSpyDIMdMbjONPQgF//iagTsaJz7fpiC/RK5ckCQlHNBGgHA1q6BSIxDpeuIdPjgK5rCSVJoIH/dXVF0dPRBREfdN4JQeXs7tc2JjZVCxY4eZhLUtqfMXoDJ3rClQFSKGKgg8eEBOMSrLsbsqPjSOe6Df3HhALNCwT0cQieY5IU2WWxoX19kcptvWaQAAdF3EpClbQ/MZWU5CIQNtyLUFRkSRx0lL9YddLnZFo5kxgEG6pscWlDBpeVExKQMeaPLF364FFul1Ap86D1EJdkc1wSOrDpqYyQpF5wQo+2666tthI77pCvW4sqTxUIkANMkgX9ZRngut5+2WXloBWm0MraSkoe7nUreUcrPH96pqDUzyQKmSTTGWimAnOJ+wyknhFaxaCVNxUvHvYF8l/fN4khM+xeNwAAAABJRU5ErkJggg=="},F9Fc:function(e,t,r){},Nrkc:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"receive"},["receive"===e.$route.name?r("div",{staticClass:"receive-content"},[r("div",{staticClass:"tabs-item-head"},[r("div",[r("dgg-icon",{staticClass:"dgg-search",attrs:{"icon-class":e.searchState?"icon_screen_selected":"icon_screen","svg-width":"15px","svg-height":"15px"},on:{click:function(t){e.searchState=!e.searchState}}}),e._v(" "),r("dgg-input",{staticClass:"search",attrs:{maxlength:30,oninput:"this.value=this.value.replace(/\\s/g,'')",onkeyup:"if(value.length>30)value=value.slice(0,30)",placeholder:"客户名称/生产单编号"},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}},[r("dgg-icon",{attrs:{slot:"prefix","icon-class":"dgg-search","svg-width":"15px","svg-height":"15px"},slot:"prefix"})],1),e._v(" "),e.searchState?e._e():r("dgg-button",{staticClass:"receive-button default-btn-with",attrs:{plain:""},on:{click:e.searchClick}},[e._v("\n          搜 索\n        ")]),e._v(" "),e.searchState?e._e():r("dgg-button",{staticClass:"dgg-button-nocolor default-btn-with",attrs:{plain:""},on:{click:e.resetClick}},[e._v("\n          重 置\n        ")]),e._v(" "),r("el-tooltip",{attrs:{effect:"dark","popper-class":"grab-tooltip",content:e.receiptTime,placement:"top"}},[r("div",{staticClass:"fr icon_info"},[r("dgg-icon",{attrs:{"icon-class":"icon_info","svg-width":"15px","svg-height":"30px"}})],1)])],1),e._v(" "),e.searchState?r("div",{staticClass:"tabs-item-query"},[r("dgg-query",{ref:"query",attrs:{"query-list":e.queryList,"can-export":!1,"clear-value":""},on:{resetEvent:e.resetQuery,search:e.search,changeEvent:e.queryEmit}})],1):e._e()]),e._v(" "),"1"===e.activeData?r("div",{staticClass:"receive-body"},[r("dgg-edit-table",{attrs:{data:e.dataList.records.length>0?e.dataList.records:[],columns:e.columns,"request-data-api":e.zysc_get_order_model_by_status,params:e.params,"page-info":e.dataList.total}})],1):e._e()]):e._e(),e._v(" "),r("el-dialog",{attrs:{visible:e.singleBackCodeDialog,title:"拒接订单",width:"400px"},on:{"update:visible":function(t){e.singleBackCodeDialog=t},close:function(t){e.singleBackCodeForm.code="",e.singleBackCodeForm.remark=""}}},[r("el-form",{ref:"form",attrs:{model:e.singleBackCodeForm}},[r("el-form-item",{attrs:{label:"拒接原因："}},[r("el-select",{attrs:{placeholder:"请选择拒接原因"},model:{value:e.singleBackCodeForm.code,callback:function(t){e.$set(e.singleBackCodeForm,"code",t)},expression:"singleBackCodeForm.code"}},e._l(e.singleBackCodeOption,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"refuse-memo",attrs:{label:"拒接备注："}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},"show-word-limit":"",maxlength:"500"},model:{value:e.singleBackCodeForm.remark,callback:function(t){e.$set(e.singleBackCodeForm,"remark",t)},expression:"singleBackCodeForm.remark"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.singleBackCodeDialog=!1,e.singleBackCodeForm.code="",e.singleBackCodeForm.remark=""}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.refusedOrder}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{staticClass:"receiveDialog-alert",attrs:{visible:e.receiveDialog,title:"接收订单",width:"400px"},on:{"update:visible":function(t){e.receiveDialog=t},close:function(t){e.receiveForm.code="",e.receiveForm.name="",e.receiveForm.projectMembersPhone="",e.searchStorePhone="",e.choosePeopleData={}}}},[r("el-form",{attrs:{model:e.receiveForm}},[r("el-form-item",{attrs:{label:"生产单编号："}},[r("p",[e._v("\n          "+e._s(this.receiveItem.scOrderNo?this.receiveItem.scOrderNo:"--")+"\n        ")])]),e._v(" "),r("el-form-item",{attrs:{label:"合同编号："}},[r("p",[e._v("\n          "+e._s(this.receiveItem.contractNo?this.receiveItem.contractNo:"--")+"\n        ")])]),e._v(" "),r("el-form-item",{staticClass:"choose-people",attrs:{label:"项目负责人："}},[Object.keys(e.choosePeopleData).length>0?[r("span",{staticClass:"show-transactor-people"},[r("img",{attrs:{src:e.choosePeopleData.photoUrl?e.choosePeopleData.photoUrl:e.taskTransactorImg,onerror:e.errorTaskTransactorImg,alt:""}}),e._v(" "),r("dgg-icon",{attrs:{"icon-class":"dgg_delete","svg-width":"14px","svg-height":"14px",sdafsadfasdffas:""},on:{click:e.deleteChoosePeople}})],1),e._v(" "),r("span",{staticClass:"show-transactor-name"},[e._v(e._s(e.choosePeopleData.label))])]:e._e(),e._v(" "),Object.keys(e.choosePeopleData).length<1?r("dgg-icon",{staticClass:"addTransactor",attrs:{"icon-class":"dgg_add","svg-width":"18px","svg-height":"18px"},on:{click:function(t){e.showChoosePeopleDialog=!e.showChoosePeopleDialog}}}):e._e(),e._v(" "),e.showChoosePeopleDialog?r("div",{staticClass:"project-people-dialog"},[r("div",{staticClass:"dgg-order-search"},[r("dgg-input",{staticClass:"search-input",attrs:{placeholder:"输入成员姓名或手机号搜索",maxlength:"30"},on:{input:function(t){e.searchStorePhone=e.searchStorePhone.replace(/\s/g,"")},blur:e.receiveOrderDialogFn},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.target.blur(t)}},model:{value:e.searchStorePhone,callback:function(t){e.searchStorePhone=t},expression:"searchStorePhone"}},[r("dgg-icon",{attrs:{slot:"prefix","icon-class":"dgg-search"},slot:"prefix"})],1)],1),e._v(" "),e.receiveOption.length>0?r("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"}},e._l(e.receiveOption,function(t,a){return r("li",{key:a,staticClass:"infinite-list-item",class:{"active-product-list":t.userId==e.chooseStoreId},on:{click:function(r){return e.chooseStoreData(t)}}},[r("span",[e._v(e._s(t.label?t.label:"--"))]),e._v(" "),r("span",[e._v(e._s(t.value?t.phone:"--"))])])}),0):e._e(),e._v(" "),e.receiveOption.length<1?r("p",{staticClass:"no-data"},[e._v("暂无数据！")]):e._e()]):e._e()],2)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.receiveDialog=!1,e.receiveForm.code="",e.receiveForm.name="",e.receiveForm.projectMembersPhone=""}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.receiveButton},on:{click:e.receiveOrder}},[e._v("确 定")])],1)],1),e._v(" "),r("router-view")],1)},o=[];r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o})},S8bw:function(e,t,r){"use strict";r.r(t);var a=r("1yFg"),o=r("WEJi");for(var s in o)"default"!==s&&function(e){r.d(t,e,function(){return o[e]})}(s);r("eNC8");var i=r("ZrdR"),n=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);n.options.__file="index.vue",t.default=n.exports},"WAr/":function(e,t,r){"use strict";var a=r("F9Fc");r.n(a).a},WEJi:function(e,t,r){"use strict";r.r(t);var a=r("mVf0"),o=r.n(a);for(var s in a)"default"!==s&&function(e){r.d(t,e,function(){return a[e]})}(s);t.default=o.a},eNC8:function(e,t,r){"use strict";var a=r("7Hlz");r.n(a).a},mVf0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(r("/umX")),o=p(r("EPZ6")),s=p(r("cLjf")),i=p(r("hDQ3")),n=p(r("bS4n")),c=r("8t5x"),l=(p(r("a/LZ")),p(r("agur"))),u=p(r("J+lr")),d=p(r("A/Ru"));function p(e){return e&&e.__esModule?e:{default:e}}t.default={name:"Receive",components:{},data:function(){var e=this;this.$createElement;return{taskTransactorImg:d.default,errorTaskTransactorImg:'this.src="'+d.default+'"',showChoosePeopleDialog:!1,chooseStoreId:"",choosePeopleData:{},searchStorePhone:"",receiveForm:{code:"",name:"",projectMembersPhone:""},receiveDialog:!1,receiveButton:!1,receiveOption:[],receiveItem:"",singleBackCodeForm:{code:""},activeData:"1",radioArray:[{label:"订 单",value:"1"},{label:"产 品",value:"2"}],activeName:"first",columns:[{prop:"businessProductName",width:"175",label:"业务产品",type:"isrender",render:function(e,t){return e("div",{style:"padding-bottom:5px;"},[e("span",{style:"border-bottom: 1px solid #10bbb8 !important;padding-bottom:3px;padding-right:3px;vertical-align: top;"},[t.row.businessProductName]),e("span",{class:"dgg-text-ellip",style:"display:inline-block; width:90px;vertical-align: top;"},[t.row.productName])])}},{prop:"scOrderNo",label:"生产单编号",width:"140",type:"isrender",render:function(t,r){return t("div",{style:"color:#10BBB8;cursor: pointer;",class:"dgg-text-ellip",on:{click:function(t){e.rowClick(r.row)}}},[r.row.scOrderNo])}},{prop:"customerName",width:"160",label:"客户名称",type:"isrender",render:function(e,t){return e("div",{class:"dgg-text-ellip"},[t.row.customerName])}},{prop:"region",width:"100",label:"办理地区"},{prop:"proScAttrName",label:"产品属性"},{prop:"orderStatusName",label:"订单状态"},{prop:"scAttrStatusName",label:"属性状态"},{label:"操作",width:"170",type:"isrender",render:function(t,r){return"QDS_SC_ORDER_STATUS_CODE07"==r.row.orderStatus?r.row.isReject?t("div",[t("dgg-button",{attrs:{plain:!0},style:"width:50px",class:"receive-button",on:{click:function(t){e.receiveOrderDialog(r.row)}}},["接 收"]),t("dgg-button",{attrs:{plain:!0},style:"width:50px;margin-left:10px;",class:"dgg-button-nocolor",on:{click:function(t){e.refuseConfirm(r.row)}}},["拒 绝"])]):t("div",[t("dgg-button",{attrs:{plain:!0},style:"width:50px",class:"receive-button",on:{click:function(t){e.receiveOrderDialog(r.row)}}},["接 收"])]):"QDS_SC_ORDER_STATUS_CODE01"==r.row.orderStatus||"QDS_SC_ORDER_STATUS_CODE19"==r.row.orderStatus||"QDS_SC_ORDER_STATUS_CODE29"==r.row.orderStatus?"QDS_ZYGSSC_ATTRSTATUS_CODE1"==r.row.scAttrStatus||"QDS_ZYGSSC_ATTRSTATUS_CODE4"==r.row.scAttrStatus?t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.Submission(r.row)}}},["提 交"]),t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.backConfirm(r.row)}}},["退 单"]),t("dgg-button",{style:"width:50px;margin-left:10px;",class:"dgg-button-nocolor",on:{click:function(t){e.showAuditDialog(r.row)}}},["结 项"])]):"QDS_ZYGSSC_ATTRSTATUS_CODE2"==r.row.scAttrStatus?t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.withdraw(r.row)}}},["撤 回"]),t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.backConfirm(r.row)}}},["退 单"]),t("dgg-button",{style:"width:50px;margin-left:10px;",class:"dgg-button-nocolor",on:{click:function(t){e.showAuditDialog(r.row)}}},["结 项"])]):t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.backConfirm(r.row)}}},["退 单"]),t("dgg-button",{style:"width:50px;margin-left:10px;",class:"dgg-button-nocolor",on:{click:function(t){e.showAuditDialog(r.row)}}},["结 项"])]):"QDS_SC_ORDER_STATUS_CODE02"==r.row.orderStatus||"QDS_SC_ORDER_STATUS_CODE03"==r.row.orderStatus||"QDS_SC_ORDER_STATUS_CODE27"==r.row.orderStatus?"QDS_ZYGSSC_ATTRSTATUS_CODE1"==r.row.scAttrStatus||"QDS_ZYGSSC_ATTRSTATUS_CODE4"==r.row.scAttrStatus?t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.Submission(r.row)}}},["提 交"]),t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.withdraw(r.row)}}},["撤 回"])]):"QDS_ZYGSSC_ATTRSTATUS_CODE2"==r.row.scAttrStatus?t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.withdraw(r.row)}}},["撤 回"]),t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.withdraw(r.row)}}},["撤 回"])]):t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.withdraw(r.row)}}},["撤 回"])]):"QDS_SC_ORDER_STATUS_CODE26"==r.row.orderStatus?"QDS_ZYGSSC_ATTRSTATUS_CODE1"==r.row.scAttrStatus||"QDS_ZYGSSC_ATTRSTATUS_CODE4"==r.row.scAttrStatus?t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.Submission(r.row)}}},["提 交"]),t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.recovery(r.row)}}},["恢 复"])]):"QDS_ZYGSSC_ATTRSTATUS_CODE2"==r.row.scAttrStatus?t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.withdraw(r.row)}}},["撤 回"]),t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.recovery(r.row)}}},["恢 复"])]):t("div",[t("dgg-button",{style:"width:50px",class:"dgg-button-nocolor",on:{click:function(t){e.recovery(r.row)}}},["恢 复"])]):void 0}}],receiptTime:null,allSearch:{},searchData:"",paramsData:{},paramsSearchData:{},singleBackCodeDialog:!1,singleBackCodeOption:[],refusedOrderRow:"",backCodeDialog:!1,backCodeOption:[],DetailDocumentfileLists:[],backOrderRow:"",caseAuditRow:"",backCodeForm:{code:"",remark:""},rules:{remark:[{required:!0,message:"请填写备注",trigger:"blur"}],code:[{required:!0,message:"",trigger:"blur"}],file:[{required:!0,message:"请上传附件",trigger:"blur"}]},docModal:!1,fileLoading:!1,fileList:[],acceptType:["doc","docx","xls","xlsx","ppt","mp3","wma","wav","pdf","pptx","txt","jpg","jpeg","gif","png","bmp","rar","zip","gz","mp4","wmv","avi","3gp","mkv"],docIconList:{".doc.docx":"icon_word",".xls.xlsx":"icon_excel",".ppt.pptx":"icon_ppt",".txt":"icon_txt",".mp3.wma.wav":"icon_music",".mp4.wmv.avi.3gp.mkv":"icon_video",".jpg.jpeg.gif.png.bmp":"icon_pic",".rar.zip.gz":"icon_package",".pdf":"icon_pdf"},imageTypes:["jpg","jpeg","gif","png","bmp"],caseAuditOption:[],caseAuditDialog:!1,caseAuditForm:{code:"",remark:""}}},computed:(0,n.default)({},(0,c.mapState)(["storeInfoData","transactionItem"]),(0,c.mapState)("orderModule",["areaOptions","productOptions","orderTeamOptions"]),(0,c.mapState)("receiveModule",["allOrderData","commodityOptions"]),{params:function(){return(0,n.default)({},this.paramsData)},uploadparams:function(){return{fileId:"back"===this.fileType?"ZYGSSC_"+this.backOrderRow.scOrderId:"ZYGSSC_"+this.caseAuditRow.scOrderId,isDeleteOriginalFile:!1,type:"back"===this.fileType?"REFUND_APPLY":"CASE_AUDIT_APPLY"}},uploadUrl:function(){return l.default.uploadUrl},listUrl:function(){return l.default.listUrl},deleteUrl:function(){return l.default.deleteUrl}}),watch:{},beforeRouteLeave:function(e,t,r){sessionStorage.processPlanRoute=t.fullPath,r()},mounted:function(){var e=(0,i.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.zysc_get_setTimeS();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),activated:function(){},created:function(){this.$route.params.overdue&&(this.paramsData.overdue=this.$route.params.overdue)},beforeDestroy:function(){},methods:(0,n.default)({},(0,c.mapActions)(["ruoterJump"]),(0,c.mapActions)("receiveModule",["get_store_peoples","zysc_get_allOrder_list","get_order_model_by_status","receive_order","refused_order","refuse_code_tree_book_list","zysc_get_setTime"]),(0,c.mapActions)("transactionModule",["search_files","apply_back_order_audit","undo_case_submission","undo_case_audit","undo_back_order_audit","undo_case_recovery","apply_case_audit","delete_files"]),(0,c.mapActions)("teamSettingModule",["get_store_user"]),(0,c.mapMutations)(["setTransactionItem","setTranstionOrderModel"]),{rowClick:function(e){sessionStorage.proccessPlanID=e.id,this.setTransactionItem(e),"QDS_SC_ORDER_STATUS_CODE07"!=e.orderStatus&&("QDS_ZYGSSC_ATTR_CODE2"!=e.proScAttr||"QDS_ZYGSSC_ATTRSTATUS_CODE4"!=e.scAttrStatus&&"QDS_ZYGSSC_ATTRSTATUS_CODE1"!=e.scAttrStatus?("QDS_SC_ORDER_STATUS_CODE01"!=e.orderStatus&&"QDS_SC_ORDER_STATUS_CODE19"!=e.orderStatus&&"QDS_SC_ORDER_STATUS_CODE29"!=e.orderStatus&&"QDS_SC_ORDER_STATUS_CODE02"!=e.orderStatus&&"QDS_SC_ORDER_STATUS_CODE03"!=e.orderStatus&&"QDS_SC_ORDER_STATUS_CODE27"!=e.orderStatus&&"QDS_SC_ORDER_STATUS_CODE26"!=e.orderStatus||this.ruoterJump({name:"transactionTask",params:{title:e.productName+"-"+e.scOrderNo}}),"QDS_SC_ORDER_STATUS_CODE04"==e.orderStatus&&this.ruoterJump({name:"finishDetailsTask",params:{title:e.customerName+"-"+e.scOrderNo}}),"QDS_SC_ORDER_STATUS_CODE05"==e.orderStatus&&this.ruoterJump({name:"chargeBackDetailsTask",params:{title:e.customerName+"-"+e.scOrderNo}})):this.ruoterJump({name:"processPlan",params:{id:e.id}}))},backConfirm:function(e){var t=this;this.$confirm("该订单根据您的行为及数据进行匹配，建议不要轻易退单，退单将会影响您的接单排名分数哟~~","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.showBackCodeDialog(e)}).catch(function(){})},showBackCodeDialog:function(){var e=(0,i.default)(s.default.mark(function e(t){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.rules.remark=[{required:!0,message:"请填写退单备注",trigger:"blur"}],this.fileType="back",e.next=4,this.refuse_code_tree_book_list({code:"QDS_ZYGSSC_CHARGEBACKTYPE",type:1,level:1});case 4:200===(r=e.sent).code&&(this.backCodeOption=r.data,this.searchFile()),this.backCodeDialog=!0,this.backOrderRow=t;case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),backOrder:function(){var e=(0,i.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.backCodeForm.code.length){e.next=3;break}return u.default.error("请选择退单原因"),e.abrupt("return");case 3:if(0!==this.backCodeForm.remark.trim().length){e.next=6;break}return u.default.error("请填写退单备注"),e.abrupt("return");case 6:if(0!==this.DetailDocumentfileLists.length){e.next=9;break}return u.default.error("请上传退单附件"),e.abrupt("return");case 9:return e.next=11,this.apply_back_order_audit({id:this.backOrderRow.id,retreatOrEndType:this.backCodeForm.code,remark:this.backCodeForm.remark});case 11:200===(t=e.sent).code?(this.$message.success("操作成功"),this.searchClick(),this.backCodeForm.code="",this.backCodeForm.remark="",this.backCodeDialog=!1,this.deleteFile=!1):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showAuditDialog:function(){var e=(0,i.default)(s.default.mark(function e(t){var r,a,o,i,n,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.orderDeadline||!t.periodSuspension){e.next=19;break}if(r=new Date(t.orderDeadline).getTime(),a=new Date(t.periodSuspension).getTime(),o=(new Date).getTime(),this.rules.remark=[{required:!0,message:"请填写结项备注",trigger:"blur"}],this.fileType="audit",this.searchFile(),!(Number(r)<Number(a)||Number(o)>Number(a))){e.next=13;break}(i=[]).push({name:"延期结项",code:"QDS_ZYGSSC_ENDTYPE_CODE2"}),this.caseAuditOption=i,this.caseAuditDialog=!0,this.caseAuditRow=t,e.next=17;break;case 13:return e.next=15,this.refuse_code_tree_book_list({code:"QDS_ZYGSSC_ENDTYPE",type:1,level:1});case 15:200===(n=e.sent).code&&(this.caseAuditOption=n.data,this.caseAuditDialog=!0,this.caseAuditRow=t);case 17:e.next=23;break;case 19:return e.next=21,this.refuse_code_tree_book_list({code:"QDS_ZYGSSC_ENDTYPE",type:1,level:1});case 21:200===(c=e.sent).code&&(this.caseAuditOption=c.data,this.caseAuditDialog=!0,this.caseAuditRow=t);case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),auditOrder:function(){var e=(0,i.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.caseAuditForm.code.length){e.next=3;break}return u.default.error("请选择结项原因"),e.abrupt("return");case 3:if(0!==this.caseAuditForm.remark.trim().length){e.next=6;break}return u.default.error("请填写结项说明"),e.abrupt("return");case 6:if(0!==this.DetailDocumentfileLists.length){e.next=9;break}return u.default.error("请上传结项附件"),e.abrupt("return");case 9:return e.next=11,this.apply_case_audit({id:this.caseAuditRow.id,retreatOrEndType:this.caseAuditForm.code,remark:this.caseAuditForm.remark});case 11:200===(t=e.sent).code?(this.$message.success("操作成功"),this.searchClick(),this.caseAuditForm.code="",this.caseAuditForm.remark="",this.caseAuditDialog=!1,this.deleteFile=!1):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Submission:function(){var e=(0,i.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.proccessPlanID=t.id,this.ruoterJump({name:"processPlan",params:{id:t.id}});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),withdraw:function(){var e=(0,i.default)(s.default.mark(function e(t){var r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$confirm("确认要撤回退单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,i.default)(s.default.mark(function e(){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.scAttrStatus||"QDS_ZYGSSC_ATTRSTATUS_CODE2"!=t.scAttrStatus){e.next=7;break}return e.next=3,r.undo_back_order_audit({id:t.id});case 3:200===(a=e.sent).code?(r.$message.success("操作成功"),r.searchClick()):r.$notify({message:a.message,type:"error",customClass:"dgg-tip-msg"}),e.next=11;break;case 7:return e.next=9,r.undo_case_audit({id:t.id});case 9:200===(o=e.sent).code?(r.$message.success("操作成功"),r.searchClick()):r.$notify({message:o.message,type:"error",customClass:"dgg-tip-msg"});case 11:case"end":return e.stop()}},e,r)}))).catch(function(){});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),recovery:function(){var e=(0,i.default)(s.default.mark(function e(t){var r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$confirm("确认要恢复订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,i.default)(s.default.mark(function e(){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.undo_case_recovery({id:t.id});case 2:200==(a=e.sent).code?(r.$message.success("操作成功"),r.searchClick()):r.$notify({message:a.message,type:"error",customClass:"dgg-tip-msg"});case 4:case"end":return e.stop()}},e,r)}))).catch(function(){});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),searchFile:function(){var e=(0,i.default)(s.default.mark(function e(t){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:return r=this.uploadparams.fileId+("back"===this.fileType?"_REFUND_APPLY":"_CASE_AUDIT_APPLY"),e.next=5,this.search_files({fileId:r});case 5:200===(a=e.sent).code&&a.data.length>0?this.DetailDocumentfileLists=a.data:this.DetailDocumentfileLists=[];case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteFiles:function(e){var t=this;Array.isArray(e)&&e.length>0&&this.deleteFile&&e.forEach(function(e){t.delete_files({fileId:e.fileid,fileName:e.filename,form:1}).then(function(e){})}),this.deleteFile=!0},submitModal:function(){var e=(0,i.default)(s.default.mark(function e(){var t=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.fileLoading=!0,e.next=3,this.$refs.uploadDoc.$refs["upload-inner"].manualUpload(function(){t.docModal=!1,t.fileLoading=!1,t.searchFile()});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fileLoadError:function(){this.fileLoading=!1},getIconByType:function(e){var t=e.filename&&e.filename.substr(e.filename.lastIndexOf(".")+1),r=(0,o.default)(this.docIconList).find(function(e){return e.indexOf(t)>-1});return this.docIconList[r]||"icon_others"},viewDocument:function(e,t){if(this.imageTypes.includes(t))this.imageUrl="",this.imageView=!0,this.imageUrl=e.filepath,this.showImgList=[this.imageUrl],this.$forceUpdate(),this.$refs.imageViewRef.clickHandler();else{var r=encodeURI(encodeURI(e.filename));window.open(e.filepath+"?title="+r)}},getDocumentType:function(e){return e.filename&&e.filename.substr(e.filename.lastIndexOf(".")+1)},invalidDocument:function(e){var t=this;this.$confirm("确认要删除该文件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delete_files({fileId:e.fileid,fileName:e.filename,form:1}).then(function(e){200===e.code&&(t.$notify({title:"提示",message:"操作成功",type:"success",customClass:"dgg-tip-msg"}),t.searchFile())})}).catch(function(){})},downloadDocument:function(e){var t=encodeURI(encodeURI(e.filename)),r=this.downloadUrl+"?fileUrl="+e.filepath+"&fileName="+t;window.open(r,"_blank")},refuseConfirm:function(e){var t=this;this.$confirm("该订单根据您的行为及数据进行匹配，建议不要轻易拒接订单，拒接订单将会影响您的接单排名分数哟~~","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.showSingleBackCodeDialog(e)}).catch(function(){})},receiveOrderDialog:function(e){this.receiveItem=e,this.receiveDialog=!0,this.receiveOrderDialogFn()},receiveOrderDialogFn:function(){var e=(0,i.default)(s.default.mark(function e(){var t,r,a=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.searchStorePhone){e.next=8;break}if(!this.storeInfoData.storeId){e.next=6;break}return e.next=4,this.get_store_peoples({storeId:this.storeInfoData.storeId});case 4:200===(t=e.sent).code?(r=[],t.data.forEach(function(e,t){"EMPLOYEE_STATUS_1"===e.currentStatus&&(e.value=e.userId,e.label=e.userName,r.push(e))}),this.receiveOption=r):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 6:e.next=9;break;case 8:this.receiveOption.length>0&&(this.receiveOption=this.receiveOption.filter(function(e){return e.label==a.searchStorePhone||e.value==a.searchStorePhone}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),chooseStoreData:function(e){var t=this;this.$nextTick(function(){t.receiveForm.code=e.value,t.receiveForm.name=e.userName,t.receiveForm.projectMembersPhone=e.phone,t.showChoosePeopleDialog=!1,t.choosePeopleData=e})},deleteChoosePeople:function(){var e=this;this.$nextTick(function(){e.choosePeopleData="",e.receiveForm.code="",e.receiveForm.name="",e.receiveForm.projectMembersPhone=""})},receiveOrder:function(){var e=(0,i.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.receiveForm.code.length){e.next=3;break}return this.$notify({message:"请选择项目负责人",type:"error",customClass:"dgg-tip-msg"}),e.abrupt("return");case 3:return t=this.receiveItem,this.receiveButton=!0,e.next=7,this.receive_order((0,a.default)({projectManagerId:this.receiveForm.code,projectManagerName:this.receiveForm.name,id:t.id,projectMembersPhone:this.receiveForm.projectMembersPhone},"id",t.id));case 7:r=e.sent,this.receiveButton=!1,200===r.code?(this.receiveDialog=!1,this.$message.success("接单成功"),this.receiveForm.code="",this.receiveForm.name="",this.receiveForm.projectMembersPhone="",this.searchClick(),this.$bus.$emit("receiveRefresh")):this.$notify({message:r.message,type:"error",customClass:"dgg-tip-msg"});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showSingleBackCodeDialog:function(){var e=(0,i.default)(s.default.mark(function e(t){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refuse_code_tree_book_list({code:"QDS_ZYGSSC_REFUSEREASON",type:1,level:1});case 2:200===(r=e.sent).code&&(this.singleBackCodeOption=r.data,this.singleBackCodeDialog=!0,this.refusedOrderRow=t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refusedOrder:function(){var e=(0,i.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.singleBackCodeForm.code.length){e.next=3;break}return this.$message.error("请选择拒接原因"),e.abrupt("return");case 3:return e.next=5,this.refused_order({id:this.refusedOrderRow.id,refuseReason:this.singleBackCodeForm.code,refuseRemark:this.singleBackCodeForm.remark});case 5:200===(t=e.sent).code?(this.$message.success("操作成功"),this.searchClick(),this.singleBackCodeDialog=!1):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),searchClick:function(){this.paramsData={keyWord:this.searchData}},resetClick:function(){this.searchData="",this.paramsData={}},zysc_get_setTimeS:function(){var e=(0,i.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.zysc_get_setTime({});case 2:200==(t=e.sent).code&&(this.receiptTime="请在"+t.data+"小时内接单，否则订单将退回且影响您的排名");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})}},v72X:function(e,t,r){"use strict";r.r(t);var a=r("7mBa"),o=r.n(a);for(var s in a)"default"!==s&&function(e){r.d(t,e,function(){return a[e]})}(s);t.default=o.a}}]);