(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f2b8"],{"3YFN":function(e,t,a){},TugN:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"order-status-btn-icon"},e._l(e.orderStatusBtnSvgs,function(t,i){return e.transactionItem.orderStatus==t.type?a("li",{key:i,on:{click:function(a){return e.orderStatusClick(e.transactionItem,t)}}},[a("dgg-tooltip",{staticClass:"msg-dot",attrs:{value:e.showTips,"popper-options":e.popperOptions,content:t.title,placement:"top",effect:"dark"}},[a("dgg-icon",{attrs:{"icon-class":t.iconClass,"svg-width":"88px","svg-height":"88px"}})],1)],1):e._e()}),0),e._v(" "),a("div",[a("el-dialog",{attrs:{visible:e.backCodeDialog,title:"退单",width:"400px"},on:{"update:visible":function(t){e.backCodeDialog=t},close:function(t){e.backCodeForm.code="",e.backCodeForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[a("el-form",{ref:"form",attrs:{model:e.backCodeForm,rules:e.rules}},[a("el-form-item",{staticClass:"return-order-type",attrs:{label:"退单类型：",prop:"code"}},[a("el-select",{attrs:{placeholder:"请选择退单类型"},model:{value:e.backCodeForm.code,callback:function(t){e.$set(e.backCodeForm,"code",t)},expression:"backCodeForm.code"}},e._l(e.backCodeOption,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"back-memo",attrs:{label:"退单备注：",prop:"remark"}},[a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},type:"textarea","show-word-limit":"",maxlength:"500"},model:{value:e.backCodeForm.remark,callback:function(t){e.$set(e.backCodeForm,"remark",t)},expression:"backCodeForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"附件上传：",prop:"file"}},[e._e(),e._v(" "),a("span",{staticClass:"file-add",on:{click:function(t){e.fileType="back",e.docModal=!0}}},[e._v("+添加")])],1),e._v(" "),a("el-form-item",[a("ul",e._l(e.DetailDocumentfileLists,function(t,i){return a("li",{key:i},[a("span",{staticClass:"icon-name"},[a("dgg-icon",{attrs:{"icon-class":e.getIconByType(t),"svg-width":"16px","svg-height":"16px"}}),e._v(" "),a("span",{staticClass:"file-name",attrs:{title:t.filename?t.filename:"--"}},[e._v(e._s(t.filename?t.filename:"--"))])],1),e._v(" "),a("span",{staticClass:"dgg-button-group file-handel"},["pdf"==e.getDocumentType(t)||e.imageTypes.includes(e.getDocumentType(t))?a("span",{on:{click:function(a){e.viewDocument(t,e.getDocumentType(t))}}},[e._v("查看\n                ")]):e._e(),e._v(" "),a("span",{on:{click:function(a){return e.downloadDocument(t)}}},[e._v("下载 ")]),e._v(" "),a("span",{on:{click:function(a){return e.invalidDocument(t)}}},[e._v("删除 ")])])])}),0)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.backCodeDialog=!1,e.backCodeForm.code="",e.backCodeForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.backOrder}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.caseAuditDialog,title:"结项",width:"400px"},on:{"update:visible":function(t){e.caseAuditDialog=t},close:function(t){e.caseAuditForm.code="",e.caseAuditForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[a("el-form",{ref:"form",attrs:{model:e.caseAuditForm,rules:e.rules}},[a("el-form-item",{staticClass:"return-order-type",attrs:{label:"结项类型：",prop:"code"}},[a("el-select",{attrs:{placeholder:"请选择结项类型"},model:{value:e.caseAuditForm.code,callback:function(t){e.$set(e.caseAuditForm,"code",t)},expression:"caseAuditForm.code"}},e._l(e.caseAuditOption,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"back-memo",attrs:{label:"结项备注：",prop:"remark"}},[a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},type:"textarea","show-word-limit":"",maxlength:"500"},model:{value:e.caseAuditForm.remark,callback:function(t){e.$set(e.caseAuditForm,"remark",t)},expression:"caseAuditForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"附件上传：",prop:"file"}},[e._e(),e._v(" "),a("span",{staticClass:"file-add",on:{click:function(t){e.fileType="audit",e.docModal=!0}}},[e._v("+添加")])],1),e._v(" "),a("el-form-item",[a("ul",e._l(e.DetailDocumentfileLists,function(t,i){return a("li",{key:i},[a("span",{staticClass:"icon-name"},[a("dgg-icon",{attrs:{"icon-class":e.getIconByType(t),"svg-width":"16px","svg-height":"16px"}}),e._v(" "),a("span",{staticClass:"file-name",attrs:{title:t.filename?t.filename:"--"}},[e._v(e._s(t.filename?t.filename:"--"))])],1),e._v(" "),a("span",{staticClass:"dgg-button-group file-handel"},["pdf"==e.getDocumentType(t)||e.imageTypes.includes(e.getDocumentType(t))?a("span",{on:{click:function(a){e.viewDocument(t,e.getDocumentType(t))}}},[e._v("查看\n                ")]):e._e(),e._v(" "),a("span",{on:{click:function(a){return e.downloadDocument(t)}}},[e._v("下载 ")]),e._v(" "),a("span",{on:{click:function(a){return e.invalidDocument(t)}}},[e._v("删除 ")])])])}),0)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.caseAuditDialog=!1,e.caseAuditForm.code="",e.caseAuditForm.remark="",e.deleteFiles(e.DetailDocumentfileLists)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.auditOrder}},[e._v("确 定")])],1)],1),e._v(" "),a("dgg-modal",{staticClass:"document-upload-modal",attrs:{modal:e.docModal,hasmodal:!0,"close-on-click-modal":!1,loading:e.fileLoading,"affirm-text":"确定",title:"上传文档",width:"512px"},on:{modalAffirm:e.docModalAffirm,modalQuit:function(t){e.docModal=!1}}},[e.docModal?a("dgg-upload-doc",{ref:"uploadDoc",staticClass:"document-upload-demo",attrs:{limit:50,"auto-upload":!1,data:e.uploadparams,"file-list":e.fileList,"accept-type":e.acceptType,"list-url":e.listUrl,"del-url":e.deleteUrl,action:e.uploadUrl,onError:e.fileLoadError,multiple:""}},[a("dgg-button",{staticClass:"receive-button",staticStyle:{width:"100px"},attrs:{type:"primary"}},[e._v("\n          上传文件\n        ")])],1):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageView,expression:"imageView"}],staticClass:"img-handle-item"},[a("el-image",{ref:"imageViewRef",staticClass:"imageViewRef fileimg",attrs:{src:e.imageUrl,"preview-src-list":e.showImgList}})],1),e._v(" "),a("dgg-modal",{staticClass:"query-template-modal task-pause-model",attrs:{modal:e.orderPauseView,"show-close":!1,hasmodal:!0,"close-on-click-modal":!1,title:"订单暂停",width:"512px"},on:{modalQuit:e.orderPauseCloseModal,modalAffirm:e.orderPauseSubmitModal}},[a("dgg-form",{ref:"orderPauseForm",attrs:{model:e.taskPauseData,rules:e.orderPauseRules,"label-width":"110px"}},[a("dgg-form-item",{staticClass:"current-task-name",attrs:{label:" 订单名称："}},[a("span",[e._v(e._s(e.transactionItem.productName))])]),e._v(" "),a("dgg-form-item",{attrs:{label:"暂停原因：",prop:"reason"}},[a("dgg-input",{staticClass:"remarksTextArea",attrs:{type:"textarea",placeholder:"请输入暂停原因",autosize:{minRows:4,maxRows:15},maxlength:"1000",oninput:"if(value.length>1000)value=value.slice(0,1000)"},model:{value:e.taskPauseData.reason,callback:function(t){e.$set(e.taskPauseData,"reason",t)},expression:"taskPauseData.reason"}})],1),e._v(" "),a("dgg-form-item",{staticClass:"plan-begin-picker-time",attrs:{label:"计划开启时间：",prop:"planBeginTime"}},[a("dgg-picker",{staticClass:"chage-deadline-time ",staticStyle:{width:"160px"},attrs:{dateType:"datetime",placeholder:"请选择计划开始时间",pickerOptions:e.setPlanBeginTime(),"default-time":"12:00:00",format:"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.taskPauseData.planBeginTime,callback:function(t){e.$set(e.taskPauseData,"planBeginTime",t)},expression:"taskPauseData.planBeginTime"}})],1)],1)],1)],1)])},r=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return r})},ejB8:function(e,t,a){"use strict";a.r(t);var i=a("TugN"),r=a("fGUD");for(var s in r)"default"!==s&&function(e){a.d(t,e,function(){return r[e]})}(s);a("fhS6");var o=a("ZrdR"),n=Object(o.a)(r.default,i.a,i.b,!1,null,"6381952e",null);n.options.__file="orderStatusIcon.vue",t.default=n.exports},fGUD:function(e,t,a){"use strict";a.r(t);var i=a("svQs"),r=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);t.default=r.a},fhS6:function(e,t,a){"use strict";var i=a("3YFN");a.n(i).a},svQs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(a("EPZ6")),r=u(a("bS4n")),s=u(a("cLjf")),o=(u(a("omC7")),u(a("hDQ3"))),n=a("8t5x"),c=u(a("J+lr")),l=u(a("agur"));u(a("a/LZ"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"OrderStatusIcon",components:{},props:{storeTransactionItem:{type:Object,default:function(){}}},data:function(){return{orderPauseRules:{planBeginTime:[{required:!0,message:"请选择计划开启时间",trigger:"blur"}],reason:[{required:!0,message:"请输入暂停原因",trigger:"blur"}]},taskPauseData:{planBeginTime:"",reason:""},orderPauseView:!1,fileList:[],fileLoading:!1,deleteFile:!0,transactionItem:{},imageView:!1,imageUrl:"",showImgList:[],paramsData:{},caseAuditRow:"",backOrderRow:"",docModal:!1,caseAuditOption:[],caseAuditDialog:!1,acceptType:["doc","docx","xls","xlsx","ppt","mp3","wma","wav","pdf","pptx","txt","jpg","jpeg","gif","png","bmp","rar","zip","gz","mp4","wmv","avi","3gp","mkv"],docIconList:{".doc.docx":"icon_word",".xls.xlsx":"icon_excel",".ppt.pptx":"icon_ppt",".txt":"icon_txt",".mp3.wma.wav":"icon_music",".mp4.wmv.avi.3gp.mkv":"icon_video",".jpg.jpeg.gif.png.bmp":"icon_pic",".rar.zip.gz":"icon_package",".pdf":"icon_pdf"},officeTypes:["doc","docx","xls","xlsx","ppt","pptx","txt"],imageTypes:["jpg","jpeg","gif","png","bmp"],DetailDocumentfileLists:[],fileType:"back",backCodeOption:[],backCodeForm:{code:"",remark:""},caseAuditForm:{code:"",remark:""},rules:{remark:[{required:!0,message:"请填写备注",trigger:"blur"}],code:[{required:!0,message:"",trigger:"blur"}],file:[{required:!0,message:"请上传附件",trigger:"blur"}]},showTips:!1,backCodeDialog:!1,popperOptions:{boundariesElement:"body"},time:0,orderStatusBtnSvgs:[{title:"撤回",iconClass:"icon_revoke",operationOrderStatus:"cancel_order",type:"QDS_SC_ORDER_STATUS_CODE03"},{title:"撤回",iconClass:"icon_revoke",operationOrderStatus:"reback_order",type:"QDS_SC_ORDER_STATUS_CODE02"},{title:"生成案例",iconClass:"icon_generate",operationOrderStatus:"over_case_order",type:"QDS_ZYGSSC_ATTRSTATUS_CODE4"},{title:"退单",iconClass:"icon_withdraw123",operationOrderStatus:"refuse_order",type:"QDS_SC_ORDER_STATUS_CODE01"},{title:"完结",iconClass:"icon_over",operationOrderStatus:"case_order",type:"QDS_SC_ORDER_STATUS_CODE01"},{title:"暂停",iconClass:"icon_zanting_order",operationOrderStatus:"pause_order",type:"QDS_SC_ORDER_STATUS_CODE01"},{title:"退单",iconClass:"icon_withdraw123",operationOrderStatus:"refuse_order",type:"QDS_SC_ORDER_STATUS_CODE19"},{title:"完结",iconClass:"icon_over",operationOrderStatus:"case_order",type:"QDS_SC_ORDER_STATUS_CODE19"},{title:"暂停",iconClass:"icon_zanting_order",operationOrderStatus:"pause_order",type:"QDS_SC_ORDER_STATUS_CODE19"},{title:"暂停",iconClass:"icon_zanting_order",operationOrderStatus:"pause_order",type:"QDS_SC_ORDER_STATUS_CODE28"},{title:"退单",iconClass:"icon_withdraw123",operationOrderStatus:"refuse_order",type:"QDS_SC_ORDER_STATUS_CODE29"},{title:"完结",iconClass:"icon_over",operationOrderStatus:"case_order",type:"QDS_SC_ORDER_STATUS_CODE29"},{title:"暂停",iconClass:"icon_zanting_order",operationOrderStatus:"pause_order",type:"QDS_SC_ORDER_STATUS_CODE29"},{title:"恢复订单",iconClass:"icon_revoke",operationOrderStatus:"icon_withdraw123",type:"QDS_SC_ORDER_STATUS_CODE26"},{title:"撤回",iconClass:"icon_revoke",operationOrderStatus:"icon_revoke",type:"QDS_SC_ORDER_STATUS_CODE27"}]}},computed:{uploadUrl:function(){return l.default.uploadUrl},listUrl:function(){return l.default.listUrl},downloadUrl:function(){return l.default.downloadUrl},deleteUrl:function(){return l.default.deleteUrl},uploadparams:function(){return{fileId:"back"===this.fileType?"ZYGSSC_"+this.backOrderRow.scOrderId:"ZYGSSC_"+this.caseAuditRow.scOrderId,isDeleteOriginalFile:!1,type:"back"===this.fileType?"REFUND_APPLY":"CASE_AUDIT_APPLY"}}},watch:{},mounted:function(){var e=(0,o.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),activated:function(){},created:function(){var e=this;this.$nextTick(function(){e.transactionItem=e.storeTransactionItem})},beforeDestroy:function(){},methods:(0,r.default)({},(0,n.mapActions)(["ruoterJump"]),(0,n.mapActions)("caseModule",["case_edit_detail"]),(0,n.mapActions)("transactionModule",["apply_case_audit","apply_back_order_audit","search_files","update_files","delete_files","undo_case_audit","undo_back_order_audit","zygs_handingOrder_applyStop"]),(0,n.mapActions)("receiveModule",["refuse_code_tree_book_list"]),(0,n.mapActions)("transactionDynamicModule",["get_production_order_details_data","zygs_handingOrder_recoveryStopOrder"]),(0,n.mapMutations)(["setTransactionItem"]),{orderStatusClick:function(){var e=(0,o.default)(s.default.mark(function e(t,a){var r,o,n=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=(new Date).getTime())-this.time<2e3)){e.next=4;break}return e.abrupt("return");case 4:if(this.time=r,"QDS_SC_ORDER_STATUS_CODE04"!=t.orderStatus){e.next=15;break}return e.next=8,this.case_edit_detail({proId:t.id});case 8:if(200!==(o=e.sent).code){e.next=15;break}if(0===o.data.times){e.next=14;break}if(!((0,i.default)(o.data).length>0)){e.next=14;break}return this.ruoterJump({name:"caseDetailsPreview",params:{caseNo:o.data.caseNo,title:o.data.caseName,from:this.$route.name}}),e.abrupt("return");case 14:this.$confirm("已生成默认案例，前往查看或修改","提示",{confirmButtonText:"编辑",cancelButtonText:"我知道了"}).then(function(){(0,i.default)(o.data).length>0&&n.ruoterJump({name:"caseGenerate",params:{caseNo:o.data.caseNo,title:o.data.caseName,from:n.$route.name}})}).catch(function(e){});case 15:"QDS_SC_ORDER_STATUS_CODE01"==t.orderStatus&&("refuse_order"==a.operationOrderStatus?this.$confirm("该订单根据您的行为及数据进行匹配，建议不要轻易退单，退单将会影响您的接单排名分数哟~~","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){n.showBackCodeDialog(t)}).catch(function(e){}):"case_order"==a.operationOrderStatus?this.showAuditDialog(t):this.orderPauseView=!0),"QDS_SC_ORDER_STATUS_CODE02"==t.orderStatus&&this.$confirm("确认要撤回退单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){n.undo(t)}).catch(function(e){}),"QDS_SC_ORDER_STATUS_CODE03"==t.orderStatus&&this.$confirm("确定撤销结项？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){n.undo(t)}).catch(function(e){}),"QDS_SC_ORDER_STATUS_CODE19"!=t.orderStatus&&"QDS_SC_ORDER_STATUS_CODE29"!=t.orderStatus||("refuse_order"==a.operationOrderStatus?this.$confirm("该订单根据您的行为及数据进行匹配，建议不要轻易退单，退单将会影响您的接单排名分数哟~~","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){n.showBackCodeDialog(t)}).catch(function(e){}):"pause_order"==a.operationOrderStatus?this.orderPauseView=!0:this.showAuditDialog(t)),"QDS_SC_ORDER_STATUS_CODE28"==t.orderStatus&&(this.orderPauseView=!0),"QDS_SC_ORDER_STATUS_CODE26"==t.orderStatus&&this.$confirm("确认恢复订单","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){n.zygs_handingOrder_recoveryStopOrder({id:n.transactionItem.id}).then(function(e){200==e.code?(n.$notify({title:"提示",message:e.message,type:"success",customClass:"dgg-tip-msg"}),n.toTranstionDetail(n.transactionItem.id)):n.$notify({title:"提示",message:e.message,type:"error",customClass:"dgg-tip-msg"})}).catch(function(e){})}).catch(function(e){}),"QDS_SC_ORDER_STATUS_CODE27"==t.orderStatus&&this.$confirm("确认撤回订单","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){n.undo(t)}).catch(function(e){});case 22:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),setPlanBeginTime:function(e){return{disabledDate:function(e){var t=Date.now();return e.getTime()<t-864e5}}},orderPauseCloseModal:function(){this.orderPauseView=!1,this.$refs.orderPauseForm.resetFields()},orderPauseSubmitModal:function(){var e=this;this.$refs.orderPauseForm.validate(function(t){t&&e.zygs_handingOrder_applyStop({id:e.transactionItem.id,planBeginTime:e.taskPauseData.planBeginTime,reason:e.taskPauseData.reason}).then(function(t){200==t.code?(e.$notify({title:"提示",message:t.message,type:"success",customClass:"dgg-tip-msg"}),e.orderPauseView=!1,e.toTranstionDetail(e.transactionItem.id)):e.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"})}).catch(function(e){})})},auditOrder:function(){var e=(0,o.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.caseAuditForm.code.length){e.next=3;break}return c.default.error("请选择结项原因"),e.abrupt("return");case 3:if(0!==this.caseAuditForm.remark.trim().length){e.next=6;break}return c.default.error("请填写结项备注"),e.abrupt("return");case 6:if(0!==this.DetailDocumentfileLists.length){e.next=9;break}return c.default.error("请上传结项附件"),e.abrupt("return");case 9:return e.next=11,this.apply_case_audit({id:this.caseAuditRow.id,retreatOrEndType:this.caseAuditForm.code,remark:this.caseAuditForm.remark});case 11:200===(t=e.sent).code?(this.$message.success("操作成功"),this.searchClick(),this.caseAuditForm.code="",this.caseAuditForm.remark="",this.deleteFile=!1,this.caseAuditDialog=!1,this.toTranstionDetail(this.transactionItem.id)):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),backOrder:function(){var e=(0,o.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.backCodeForm.code.length){e.next=3;break}return c.default.error("请选择退单原因"),e.abrupt("return");case 3:if(0!==this.backCodeForm.remark.trim().length){e.next=6;break}return c.default.error("请填写退单备注"),e.abrupt("return");case 6:if(0!==this.DetailDocumentfileLists.length){e.next=9;break}return c.default.error("请上传退单附件"),e.abrupt("return");case 9:return e.next=11,this.apply_back_order_audit({id:this.backOrderRow.id,retreatOrEndType:this.backCodeForm.code,remark:this.backCodeForm.remark});case 11:200===(t=e.sent).code?(this.$message.success("操作成功"),this.searchClick(),this.backCodeForm.code="",this.backCodeForm.remark="",this.deleteFile=!1,this.backCodeDialog=!1,this.$notify({title:"提示",message:"操作成功",type:"success",customClass:"dgg-tip-msg"}),this.toTranstionDetail(this.transactionItem.id)):this.$notify({message:t.message,type:"error",customClass:"dgg-tip-msg"});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showAuditDialog:function(){var e=(0,o.default)(s.default.mark(function e(t){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.rules.remark=[{required:!0,message:"请填写结项备注",trigger:"blur"}],this.fileType="audit",this.searchFile(),e.next=5,this.refuse_code_tree_book_list({code:"QDS_ZYGSSC_ENDTYPE",type:1,level:1});case 5:200===(a=e.sent).code&&(this.caseAuditOption=a.data,this.caseAuditDialog=!0,this.caseAuditRow=t);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),showBackCodeDialog:function(){var e=(0,o.default)(s.default.mark(function e(t){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.rules.remark=[{required:!0,message:"请填写退单备注",trigger:"blur"}],this.fileType="back",e.next=4,this.refuse_code_tree_book_list({code:"QDS_ZYGSSC_CHARGEBACKTYPE",type:1,level:1});case 4:200===(a=e.sent).code&&(this.backCodeOption=a.data,this.searchFile()),this.backCodeDialog=!0,this.backOrderRow=t;case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),undo:function(){var e=(0,o.default)(s.default.mark(function e(t){var a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.scAttrStatus||"QDS_ZYGSSC_ATTRSTATUS_CODE2"!=t.scAttrStatus){e.next=7;break}return e.next=3,this.undo_back_order_audit({id:t.id});case 3:200===(a=e.sent).code?(this.$notify({title:"提示",message:"已撤销退单，前往办理中订单查看",type:"success",customClass:"dgg-tip-msg"}),this.toTranstionDetail(this.transactionItem.id),this.searchClick()):this.$notify({message:a.message,type:"error",customClass:"dgg-tip-msg"}),e.next=11;break;case 7:return e.next=9,this.undo_case_audit({id:t.id});case 9:200===(i=e.sent).code?("QDS_SC_ORDER_STATUS_CODE27"==t.orderStatus?this.$notify({title:"提示",message:"已撤销订单，前往办理中订单查看",type:"success",customClass:"dgg-tip-msg"}):this.$notify({title:"提示",message:"已撤销结项，前往办理中订单查看",type:"success",customClass:"dgg-tip-msg"}),this.toTranstionDetail(this.transactionItem.id),this.searchClick()):this.$notify({message:i.message,type:"error",customClass:"dgg-tip-msg"});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getIconByType:function(e){var t=e.filename&&e.filename.substr(e.filename.lastIndexOf(".")+1),a=(0,i.default)(this.docIconList).find(function(e){return e.indexOf(t)>-1});return this.docIconList[a]||"icon_others"},viewDocument:function(e,t){if(this.imageTypes.includes(t))this.imageUrl="",this.imageView=!0,this.imageUrl=e.filepath,this.showImgList=[this.imageUrl],this.$forceUpdate(),this.$refs.imageViewRef.clickHandler();else{var a=encodeURI(encodeURI(e.filename));window.open(e.filepath+"?title="+a)}},getDocumentType:function(e){return e.filename&&e.filename.substr(e.filename.lastIndexOf(".")+1)},searchFile:function(){var e=(0,o.default)(s.default.mark(function e(t){var a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:return a=this.uploadparams.fileId+("back"===this.fileType?"_REFUND_APPLY":"_CASE_AUDIT_APPLY"),e.next=5,this.search_files({fileId:a});case 5:200===(i=e.sent).code&&i.data.length>0?this.DetailDocumentfileLists=i.data:this.DetailDocumentfileLists=[];case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),downloadDocument:function(e){var t=encodeURI(encodeURI(e.filename)),a=this.downloadUrl+"?fileUrl="+e.filepath+"&fileName="+t;window.open(a,"_blank")},deleteFiles:function(e){var t=this;Array.isArray(e)&&e.length>0&&this.deleteFile&&e.forEach(function(e){t.delete_files({fileId:e.fileid,fileName:e.filename,form:1}).then(function(e){})}),this.deleteFile=!0},invalidDocument:function(e){var t=this;this.$confirm("确认要删除该文件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delete_files({fileId:e.fileid,fileName:e.filename,form:1}).then(function(e){200===e.code&&(t.$notify({title:"提示",message:"操作成功",type:"success",customClass:"dgg-tip-msg"}),t.searchFile())})}).catch(function(){})},toTranstionDetail:function(e){var t=this;e&&this.get_production_order_details_data({id:e}).then(function(e){200==e.code&&t.$nextTick(function(){t.setTransactionItem(e.data),t.transactionItem=e.data})})},searchClick:function(){this.paramsData={customerOrScOrderNoOrContractNo:this.searchData}},fileLoadError:function(){this.fileLoading=!1},docModalAffirm:function(){var e=(0,o.default)(s.default.mark(function e(){var t=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.fileLoading=!0,e.next=3,this.$refs.uploadDoc.$refs["upload-inner"].manualUpload(function(){t.docModal=!1,t.fileLoading=!1,t.searchFile()});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})}}}]);